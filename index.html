<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TON ‚Üí LayerZero</title>
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  </head>
  <body>
    <h1>üì° TON ‚Üí LayerZero</h1>
    <div id="ton-connect"></div>
    <button id="send-message">Send LayerZero Message</button>

    <script>
      const connector = new TON_CONNECT_UI.TonConnectUI({
        manifestUrl: "https://ton-layerzero-git-main-helter0s-projects.vercel.app/tonconnect-manifest.json",
        buttonRootId: "ton-connect",
      });

      document.getElementById("send-message").onclick = async () => {
        console.log("üîò Button clicked");

        const connectedWallet = await connector.connectWallet();

        if (!connectedWallet) {
          alert("‚ùå Wallet not connected");
          return;
        }

        console.log("‚úÖ Wallet connected:", connectedWallet);

        const address = "EQDF40kcwCXAfquLxsX4z_J9FmikzLak-kBOABkA1FPqcFnD"; // –¢–≤–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
        const payload = "te6ccgEBAQEAAgAAAP4="; // Payload –¥–ª—è sendMessage

        try {
          console.log("üì® Sending transaction...");

          await connector.sendTransaction({
            validUntil: Math.floor(Date.now() / 1000) + 60,
            messages: [
              {
                address,
                amount: "2000000", // 0.002 TON –≤ nanotons
                payload,
              },
            ],
          });

          console.log("‚úÖ Transaction sent!");
        } catch (error) {
          console.error("‚ùå Transaction failed:", error);
          alert("Transaction failed: " + (error.message || error));
        }
      };
    </script>
  </body>
</html>
